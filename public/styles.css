:root{
  --page-max: 1120px;

  /* spacing scale */
  --s1: 4px;
  --s2: 8px;
  --s3: 12px;
  --s4: 16px;
  --s5: 24px;
  --s6: 32px;
  --s7: 40px;

  --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;

  --text: #111827;
  --muted: #6b7280;

  --bg: #ffffff;
  --panel: #f8fafc;
  --border: #e5e7eb;

  /* Subtle FEthink accent (restrained) */
  --accent: #794BA7;
  --accent-weak: rgba(121, 75, 167, 0.10);

  --primary: #111827;

  --r-sm: 10px;
  --r-md: 12px;
  --r-lg: 16px;

  --shadow: 0 1px 1px rgba(17,24,39,0.04), 0 10px 30px rgba(17,24,39,0.08);
  --shadow-soft: 0 1px 1px rgba(17,24,39,0.04), 0 6px 18px rgba(17,24,39,0.06);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: var(--font);
  color: var(--text);
  background: var(--bg);
  line-height: 1.55;
  font-size: 15px;
}

h1,h2,h3{
  margin: 0 0 var(--s2) 0;
  line-height: 1.25;
  letter-spacing: -0.25px;
}
h1{ font-size: 18px; font-weight: 900; }
h2{ font-size: 16px; font-weight: 900; }
h3{ font-size: 14px; font-weight: 900; }

p{ margin: 0 0 var(--s3) 0; }
.subtle{ color: var(--muted); font-size: 13px; }

button, input, textarea{ font-family: var(--font); }

textarea, input{
  width:100%;
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  padding: 10px 12px;
  font-size: 14px;
  color: var(--text);
  background: #fff;
  outline: none;
}
textarea{ resize: vertical; line-height: 1.5; min-height: 280px; }
textarea:focus, input:focus{
  border-color: rgba(121, 75, 167, 0.35);
  box-shadow: 0 0 0 4px var(--accent-weak);
}

/* Buttons */
button{
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  padding: 10px 12px;
  cursor: pointer;
  background: #fff;
  color: var(--text);
  font-weight: 900;
  transition: transform 80ms ease, box-shadow 120ms ease, border-color 120ms ease;
}
button:hover{ box-shadow: var(--shadow-soft); }
button:active{ transform: translateY(1px); }
button:disabled{
  opacity: 0.65;
  cursor: not-allowed;
  box-shadow: none;
}
button.primary{
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
}
button.secondary{ background:#fff; }
button.small{
  padding: 8px 10px;
  font-size: 12px;
  font-weight: 900;
}
button.full{
  width:100%;
  text-align:left;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: var(--s3);
}
button.full::after{
  content: "▾";
  color: var(--muted);
  font-weight: 900;
}
button.full[aria-expanded="true"]::after{
  content: "▴";
}

/* Top bar */
.topbar{
  border-bottom:1px solid var(--border);
  padding: var(--s4);
  background:#fff;
}
.brand{
  max-width: var(--page-max);
  margin: 0 auto;
  display:flex;
  gap: var(--s4);
  align-items:center;
}
.logo{
  font-weight: 900;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: #fff;
  position: relative;
}
.logo::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius: var(--r-md);
  pointer-events:none;
  background: linear-gradient(135deg, rgba(121,75,167,0.35), rgba(121,75,167,0.05));
  opacity: 0.35;
  z-index:-1;
}
.title{ flex:1; min-width: 240px; }
.title p{ margin: var(--s1) 0 0 0; color: var(--muted); font-size: 13px; }

.headerBtns{
  display:flex;
  gap: var(--s2);
  align-items:center;
  flex-wrap:wrap;
}

/* Link buttons (Payhip nav) */
.linkBtn{
  display:inline-block;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  background:#fff;
  color: var(--text);
  text-decoration:none;
  font-weight:900;
  font-size: 13px;
  transition: box-shadow 120ms ease, border-color 120ms ease;
}
.linkBtn:hover{
  box-shadow: var(--shadow-soft);
  border-color: rgba(121,75,167,0.35);
}

/* Layout */
.layout{
  max-width: var(--page-max);
  margin: 0 auto;
  padding: var(--s6) var(--s4);
}
.card{
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  background: linear-gradient(180deg, #ffffff 0%, #fbfbfd 100%);
  padding: var(--s6);
  box-shadow: var(--shadow);
}

/* 2 columns */
.twoCol{
  display:grid;
  grid-template-columns: 1.15fr 0.85fr;
  gap: var(--s5);
  align-items:start;
}
@media (max-width: 980px){
  .twoCol{ grid-template-columns: 1fr; }
  .card{ padding: var(--s5); }
}

.panel{
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  background:#fff;
  padding: var(--s5);
  box-shadow: var(--shadow-soft);
  position: relative;
}
.panel::before{
  content:"";
  position:absolute;
  top:0; left:0; right:0;
  height: 4px;
  border-top-left-radius: var(--r-lg);
  border-top-right-radius: var(--r-lg);
  background: linear-gradient(90deg, rgba(121,75,167,0.55), rgba(121,75,167,0.12));
  opacity: 0.45;
}

/* Template box */
.templateBox{
  margin-top: var(--s4);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  background: #fff;
  padding: var(--s5);
  box-shadow: var(--shadow-soft);
}
.templateHeader{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: var(--s3);
}
.templateBtns{
  display:flex;
  gap: var(--s2);
  flex-wrap:wrap;
  justify-content:flex-end;
}

.actionsRow{
  display:flex;
  gap: var(--s3);
  align-items:center;
  margin-top: var(--s4);
  flex-wrap:wrap;
}

.scoreBox{
  margin-left:auto;
  padding: 10px 12px;
  border:1px solid var(--border);
  border-radius: var(--r-md);
  background:#fff;
  color: var(--muted);
  font-size: 13px;
  min-width: 120px;
  text-align:center;
}

.hint{
  margin-top: var(--s3);
  color: var(--muted);
  font-size: 13px;
}

/* Task text: preserve line breaks from server */
#questionText{
  white-space: pre-wrap;
}

/* Feedback */
.feedbackCard{
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  background:#fff;
  padding: var(--s5);
  box-shadow: var(--shadow-soft);
}

.feedbackTop{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--s4);
  margin-bottom: var(--s4);
}
.metric{
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  padding: var(--s4);
  background: linear-gradient(180deg, var(--panel) 0%, #ffffff 100%);
}
.metricLabel{
  color: var(--muted);
  font-size: 12px;
  font-weight: 900;
}
.metricValue{
  font-size: 20px;
  font-weight: 900;
  margin-top: var(--s1);
}

.feedbackBox{
  margin-top: var(--s3);
  padding: var(--s4);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  background: var(--panel);
  font-size:14px;
  white-space: pre-wrap;
  line-height: 1.6;
}
.feedbackBox:empty{ display:none; }

/* Blocks */
.block{ margin-top: var(--s4); }

/* Strengths bullets */
.bullets{
  margin: var(--s2) 0 0 var(--s4);
  padding: 0;
  font-size: 13px;
}
.bullets li{
  margin-bottom: var(--s2);
  color: var(--muted);
}
.bullets li::marker{ color: rgba(121,75,167,0.8); }

/* Tags */
.tagsRow{
  display:flex;
  flex-wrap:wrap;
  gap: var(--s2);
  margin-top: var(--s2);
}
.tag{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 8px 10px;
  background:#fff;
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
}
.tag .tagStatus{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: var(--panel);
  font-weight: 900;
  font-size: 12px;
  color: var(--muted);
}

/* Grid */
.grid{
  margin-top: var(--s2);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  overflow:hidden;
  background:#fff;
}
.gridRow{
  display:flex;
  justify-content:space-between;
  gap: var(--s3);
  padding: var(--s3) var(--s4);
  border-bottom:1px solid var(--border);
}
.gridRow:last-child{ border-bottom:none; }
.gridName{
  font-weight: 900;
  font-size: 13px;
}
.gridStatus{
  font-weight: 900;
  font-size: 13px;
  color: var(--muted);
}

/* Learn more / tabs */
.frameworkPanel{
  margin-top: var(--s3);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  background:#fff;
  overflow:hidden;
}

.tabs{
  display:flex;
  gap: var(--s2);
  padding: var(--s3);
  border-bottom:1px solid var(--border);
  background: var(--panel);
  flex-wrap:wrap;
}

.tabBtn{
  border:1px solid var(--border);
  border-radius: 999px;
  padding: 8px 10px;
  font-size: 12px;
  font-weight: 900;
  background:#fff;
}
.tabBtn.active{
  background: var(--accent);
  border-color: var(--accent);
  color:#fff;
}

.tabBody{
  padding: var(--s4);
}

.tabPane{ display:none; }
.tabPane.active{ display:block; }

.fwRow{
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  padding: var(--s4);
  background: linear-gradient(180deg, var(--panel) 0%, #ffffff 100%);
  margin-bottom: var(--s3);
}
.fwTitle{
  font-weight: 900;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: var(--s2);
}
.fwText{
  font-size: 13px;
  line-height: 1.6;
  color: var(--text);
}

/* Model answer */
.modelWrap{
  margin-top: var(--s4);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  padding: var(--s4);
  background:#fff;
}
.modelAnswer{
  margin: var(--s3) 0 0 0;
  white-space: pre-wrap;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.6;
}

/* Gate */
.gate{
  position:fixed;
  inset:0;
  background:rgba(17,24,39,0.55);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: var(--s5);
  z-index:9999;
}
.gateCard{
  width:min(560px, 100%);
  background:#fff;
  border-radius: var(--r-lg);
  border:1px solid var(--border);
  padding: var(--s6);
  box-shadow: var(--shadow);
}
.gateBrand{
  display:flex;
  gap: var(--s3);
  align-items:center;
  margin-bottom: var(--s2);
}
.gateLabel{
  display:block;
  margin-top: var(--s4);
  font-weight: 900;
  font-size: 13px;
}
.gateRow{
  display:grid;
  grid-template-columns:1fr 110px;
  gap: var(--s3);
  margin-top: var(--s2);
}
.gateMsg{
  margin-top: var(--s3);
  color: var(--muted);
  font-size:13px;
  min-height:18px;
}
.gateHint{
  margin-top: var(--s4);
  color: var(--muted);
  font-size:12px;
}

/* Footer */
.footer{
  border-top:1px solid var(--border);
  padding: var(--s5);
  text-align:center;
  color: var(--muted);
  font-size:12px;
}
